\documentclass[12pt,a4paper]{article}
\usepackage{polski}
\usepackage[cp1250]{inputenc}
\usepackage{graphicx}
\usepackage{float}
\usepackage{multirow}
\usepackage{hyperref}
\graphicspath{ {./img/} }

\begin{document}
\section{Wersje konsol}
Pierwotnym wydaniem konsoli by³ Family Computer z 1983 roku, w skróconej formie nazywany "Famicom". Famicom oficjalnie nigdy nie zosta³ wydany poza Japoni¹.
Nintendo przygotowuj¹c siê do wydania miêdzynarodowego swojej konsoli do grania podjê³o decyzjê o przeprojektowaniu wygl¹du sprzêtu w celu dostosowania siê do zachodnich odbiorców. Wynikiem tych prac by³ Nintendo Entertainment System, wydany w 1985 roku w USA, rok póŸniej na terenie Europy oraz w 1987 roku w pozosta³ych lokalizacjach w Europie oraz Australii\cite{wikiNES}.
\begin{figure}[H]
\begin{minipage}[c]{0.5\linewidth}
\includegraphics[width=\textwidth]{Nintendo-Famicom-Console-Set-FL}
\caption{Family Computer wraz z kontrolerami\cite{IMG-NintendoFamicomConsoleSetFL}}
\end{minipage}
\hfill
\begin{minipage}[c]{0.5\linewidth}
\includegraphics[width=\textwidth]{NES-Console-Set}
\caption{Nintendo Entertainment System NES-001 wraz z kontrolerem\cite{IMG-NESConsoleSet}}
\end{minipage}%
\end{figure}

Odœwie¿one wersje konsol zosta³y wydane w 1993 roku. Nintendo znacznie zunifikowa³o wygl¹d zewnêtrzny konsol, zachowuj¹c kompatybilnoœæ kartrid¿y dla poszczególnych regionów.
\begin{figure}[H]
\begin{minipage}[c]{0.5\linewidth}
\includegraphics[width=\textwidth]{New_Famicom}
\caption{"New Famicom" wraz z kontrolerem\cite{IMG-NewFamicom}}
\end{minipage}
\hfill
\begin{minipage}[c]{0.5\linewidth}
\includegraphics[width=\textwidth]{NES-101-Console-Set}
\caption{Nintendo Entertainment System NES-101 wraz z kontrolerem\cite{IMG-NES101ConsoleSet}}
\end{minipage}%
\end{figure}

Obok oryginalnych sprzêtów od Nintendo równoczeœnie egzystowa³y konsole podrabiane na masow¹ skalê, w wiêkszoœci by³y to produkty kompatybilne z japoñskim Famicomem. Dok³adna historia nie jest znana; zebrane informacje pozwalaj¹ na stwierdzenie, i¿ pierwsze podróbki zaczê³y pojawiaæ siê pod koniec lat osiemdziesi¹tych oraz zosta³y wyprodukowane na Tajwanie. W latach dziewiêædziesi¹tych nastêpowa³a miniutaryzacja sprzêtów oraz minimalizacja kosztów, co spowodowa³o stopniowo powiêkszane przenoszenie produkcji do Chin oraz drastyczny spadek jakoœci wykonania konsol.
Kreatywnoœæ "piratów" doprowadzi³a do powstania sprzêtów bêd¹cych czymœ innym ni¿ zwyczajna konsola:
\begin{itemize}
  \item Konsole z dwoma gniazdami na kartrid¿e - jedno dla gier z Famicoma, drugie dla gier z NES,
  \item Konsole z dwoma gniazdami na kartrid¿e - jedno standardowo na zewn¹trz obudowy, drugie wewn¹trz obudowy z fabrycznie zamontowan¹ gr¹. Dziêki temu rozwi¹zaniu gdy w zewnêtrznym gnieŸdzie nie by³o zamontowanego kartrid¿a to uruchamia³ siê kartrid¿ wbudowany w konsolê,
  \item Konsola-klawiatura, udaj¹ca komputer - zawsze do³¹czano kartrid¿ z "programami multimedialnymi" które korzysta³y z klawiatury. By³a tu pewna inspiracja oficjalnym Family Basic,
  \item Przenoœna konsola z wbudowanym wyœwietlaczem,
  \item Sprzêty "Plug 'n' Play" o wymyœlnych kszta³tach, czêsto by³y one pozbawione gniazda na kartrid¿e, zatem wbudowane gry musia³y wystarczyæ.
\end{itemize}
\begin{figure}[H]
\begin{minipage}[c]{0.5\linewidth}
\includegraphics[width=\textwidth]{415J8GUp-KL--52577.1589699928}
\caption{Generation NEX - klon z dwoma gniazdami na kartrid¿e, górne jest dla gier Famicom, boczne dla gier NES\cite{IMG-GenerationNEX}}
\end{minipage}
\hfill
\begin{minipage}[c]{0.5\linewidth}
\includegraphics[width=\textwidth]{DY-656-400}
\caption{Daryar DY-400-656 - konsola z wbudowan¹ gr¹ 400 in 1\cite{IMG-DaryarDY400656}}
\end{minipage}%
\end{figure}

\begin{figure}[H]
\begin{minipage}[c]{0.5\linewidth}
\includegraphics[width=\textwidth]{glk_2004}
\caption{GLK-2004 - popularna konsola-klawiatura\cite{IMG-GLK-2004}}
\end{minipage}
\hfill
\begin{minipage}[c]{0.5\linewidth}
\includegraphics[width=\textwidth]{gameaxe_1}
\caption{Game Axe Color - jeden z pierwszych handheldów (2000 rok) odtwarzaj¹cy gry z Famicoma\cite{IMG-Game-Axe-Color}}
\end{minipage}%
\end{figure}


Klony konsoli Nintendo s¹ produkowane po dzieñ dzisiejszy, tyle ¿e czêœciowo wysz³y ze szarej strefy - "Wielkie N" nie ma podstaw prawnych do s¹dzenia siê z firmami gdy¿ wygas³y patenty (TODO: sprawdziæ dok³adnie jak to wygl¹da, lecê z g³owy z tego co kiedyœ czyta³em). Konstrukcje s¹ równie¿ uwspó³czeœniane poprzez zastosowanie gniazd HDMI czy obs³ugê gier z kilku platform jednoczeœnie.
\begin{figure}[H]
\begin{minipage}[c]{0.5\linewidth}
\includegraphics[width=\textwidth]{RetroUSB-AVS-Console-wController-FL}
\caption{RetroUSB AVS - konsola wysokiej jakoœci do której stworzenia u¿yto podzespo³ów z oryginalnych NES\cite{IMG-RetroUSBAVS}}
\end{minipage}
\hfill
\begin{minipage}[c]{0.5\linewidth}
\includegraphics[width=\textwidth]{ret5bk--54484.1567795736.1280.1280}
\caption{Hyperkin RetroN 5 - sprzêt obs³uguj¹cy ogromn¹ iloœæ platform jednoczeœnie, równie¿ kartrid¿e do NES i Famicoma\cite{IMG-RetroN5}}
\end{minipage}%
\end{figure}

\begin{figure}[H]
\centering
\begin{minipage}[c]{0.5\linewidth}
\includegraphics[width=\textwidth]{61iW8vUHOJL.-AC-SL1500-}
\caption{NES 620 Games - niskobud¿etowy, wspó³czesny klon konsoli NES z wbudowanymi grami, bez zewnêtrznego gniazda na kartrid¿e\cite{IMG-620Games}}
\end{minipage}%
\end{figure}

Nieoficjalne sprzêty zyska³y popularnoœæ w biedniejszych krajach w których Nintendo nie dystrybuowa³o swoich produktów. "Marki" konsol ró¿ni³y siê miêdzy poszczególnymi pañstwami, niektóre kraje mia³y nawet "oficjalnych dystrybutorów tych¿e podróbek. Mia³y równie¿ miejsce sytuacje, gdzie jeden i ten sam model / typ konsoli by³ sprzedawany pod kilkoma nazwami.\cite{wikiNESClones}

\begin{figure}[htp]
\centering
\includegraphics[width=.5\textwidth]{img/iq502.jpg}
\caption{Micro Genius IQ-502 - wersja konsoli sygnowana mark¹ producenta\cite{IMG-mgiq502}}
\label{fig:figure3}
\end{figure}

\begin{figure}[H]
\begin{minipage}[c]{0.5\linewidth}
\includegraphics[width=\textwidth]{pegiq502}
\caption{Pegasus IQ-502 - wersja Micro Genius IQ-502 przeznaczona na rynek polski, Pegasus to marka firmy Bobmark.\cite{IMG-pegiq502}}
\end{minipage}
\hfill
\begin{minipage}[c]{0.5\linewidth}
\includegraphics[width=\textwidth]{5b6c9ad96c86cb85b53b41c2}
\caption{Dendy Classic 2 - wersja konsoli Micro Genius IQ-502 przeznaczona na rynek rosyjski, Dendy to marka firmy Steepler.\cite{IMG-deniq502}}
\end{minipage}%
\end{figure}
Wszystkie trzy powy¿sze sprzêty to w rzeczywistoœci jeden projekt firmy Micro Genius, ró¿ni¹cy siê logotypami na konsoli oraz padach.

\section{Specyfikacja konsoli}
Procesor (CPU): Ricoh 2A03 (NTSC) / Ricoh 2A07 (PAL), oœmiobitowy mikroprocesor bêd¹cy modyfikacj¹ MOS 6502. Ró¿nice 2A03 / 2A07 wzglêdem produktu MOS Technology s¹ nastêpuj¹ce\cite{nesdoc}:
\begin{itemize}
  \item Deaktywowany tryb dziesiêtny (BCD),
  \item Wbudowany generator dŸwiêkowy,
  \item Obs³uga kontrolerów poprzez porty \$4016 oraz \$4017,
  \item DMA.
\end{itemize}
Mimo i¿ jest to 8-bitowy procesor, mo¿na zaadresowaæ 64 kilobajty pamiêci.
To, jak podzielona jest ta przestrzeñ adresowa przedstawia poni¿sza tabela (podane wartoœci s¹ zapisane w systemie szesnastkowym):
\begin{table}[H]
\begin{tabular}{|l|l|l|}
\hline
Adresy & Rozmiar & Zastosowanie \\
\hline
{\$}0000 - {\$}07FF & {\$}0800 & Wewnêtrzna pamiêæ RAM (dwa kilobajty) \\ \hline
{\$}0800 - {\$}1FFF & {\$}0800 & Duble danych spod adresów {\$}0000 - {\$}07FF (co dwa kilobajty) \\ \hline
{\$}2000 - {\$}2007 & {\$}0008 & Rejestry kontroluj¹ce PPU \\ \hline
{\$}2008 - {\$}3FFF & {\$}1FF8 & Duble danych spod adresów {\$}2000 - {\$}2007 (co osiem bajtów)\\ \hline
{\$}4000 - {\$}4017 & {\$}0018 & Rejestry kontroluj¹ce APU oraz rejestry wejœcia / wyjœcia\\ \hline
{\$}4018 - {\$}401F & {\$}0008 & Dezaktywowany tryb samotestowania \\ \hline
{\$}4020 - {\$}FFFF & {\$}BFE0 & Przestrzeñ do dowolnej dyspozycji dla kartrid¿a \\ \hline 
\end{tabular}
\end{table}
Adresy {\$}4020 - {\$}FFFF s¹ zaadresowane zgodnie z mo¿liwoœciami kartrid¿a (patrz \nameref{mapper}) \cite{nesmemorymap}

Uk³ad graficzny (PPU): Ricoh 2C02, oœmiobitowy uk³ad opracowany przez Nintendo specjalnie dla tej konsoli. Mimo i¿ jest to 8-bitowy procesor, mo¿na zaadresowaæ 16 kilobajtów pamiêci. To, jak podzielona jest ta przestrzeñ adresowa przedstawia poni¿sza tabela (podane wartoœci s¹ zapisane w systemie szesnastkowym):
\begin{table}[H]
\begin{tabular}{|l|l|l|} \hline
Adresy & Rozmiar & Zastosowanie \\ \hline
{\$}0000 - {\$}0FFF & {\$}1000 & \nameref{patterntable} 0 \\ \hline
{\$}1000 - {\$}1FFF & {\$}1000 & \nameref{patterntable} 1 \\ \hline
{\$}2000 - {\$}23FF & {\$}0400 & \nameref{nametable} 0 \\ \hline
{\$}2400 - {\$}27FF & {\$}0400 & \nameref{nametable} 1 \\ \hline
{\$}2800 - {\$}2BFF & {\$}0400 & \nameref{nametable} 2 \\ \hline
{\$}2C00 - {\$}2FFF & {\$}0400 & \nameref{nametable} 3 \\ \hline
{\$}3000 - {\$}3EFF & {\$}0F00 & Dubel danych spod adresów {\$}2000 - {\$}2EFF \\ \hline 
{\$}3F00 - {\$}3F1F & {\$}0020 & \nameref{palette} \\ \hline 
{\$}3F20 - {\$}3FFF & {\$}00E0 & Duble palety barw (co 32 bajty) \\ \hline 
\end{tabular}
\end{table}
Dostêp do wy¿ej wymienionych adresów odbywa siê poprzez adresy CPU: {\$}2006 i {\$}2007.
Gniazdo kartrid¿y: 60-pin (Famicom), 72-pin (NES)

\subsection{Rejestry kontroluj¹ce PPU}
\label{cpuppuregisters}
Adresy {\$}2000 - {\$}2007 oraz {\$}4014 w CPU maj¹ specjalne znaczenie - poprzez nie programista / program mo¿e wp³yn¹æ na dzia³anie uk³adu graficznego konsoli. Zwyczajowe nazwy tych adresów przedstawia poni¿sza tabela \cite{wikicpuppuregisters}:
\begin{table}[H]
\begin{tabular}{|l|l|} \hline
Adres {hex} & Nazwa \\ \hline
{\$}2000 & PPUCTRL \\ \hline
{\$}2001 & PPUMASK \\ \hline
{\$}2002 & PPUSTATUS \\ \hline
{\$}2003 & OAMADDR \\ \hline
{\$}2004 & OAMDATA \\ \hline
{\$}2005 & PPUSCROLL \\ \hline
{\$}2006 & PPUADDR \\ \hline
{\$}2007 & PPUDATA \\ \hline
{\$}4014 & OAMDMA \\ \hline
\end{tabular}
\end{table}
Nazw tych powszechnie u¿ywa siê w kodzie programów zamiast adresów bezpoœrednich oraz w dyskusjach na temat programowania konsol NES / Famicom. Tak¹ zasadê stosujê równie¿ w tym dokumencie.



\subsection{Rejestry kontroluj¹ce APU}
\label{cpuapuregisters}
Adresy {\$}4000 - {\$}4013, {\$}4015 oraz {\$}4017 w CPU maj¹ specjalne znaczenie - poprzez nie programista / program mo¿e wp³yn¹æ na dzia³anie uk³adu dŸwiêkowego konsoli. Zwyczajowe nazwy tych adresów przedstawia poni¿sza tabela \cite{wikicpuapuregisters}:
\begin{table}[H]
\begin{tabular}{|l|l|} \hline
Adres {hex} & Nazwa \\ \hline
{\$}4000 & PL1\_VOL \\ \hline
{\$}4001 & PL1\_SWEEP \\ \hline
{\$}4002 & PL1\_LO \\ \hline
{\$}4003 & PL1\_HI \\ \hline
{\$}4004 & PL2\_VOL \\ \hline
{\$}4005 & PL2\_SWEEP \\ \hline
{\$}4006 & PL2\_LO \\ \hline
{\$}4007 & PL2\_HI \\ \hline
{\$}4008 & TRI\_LINEAR \\ \hline
{\$}400A & TRI\_LO \\ \hline
{\$}400B & TRI\_HI \\ \hline
{\$}400C & NOISE\_VOL \\ \hline
{\$}400E & NOISE\_LO \\ \hline
{\$}400F & NOISE\_HI \\ \hline
{\$}400E & DMC\_FREQ \\ \hline
{\$}400F & DMC\_RAW \\ \hline
{\$}4010 & DMC\_START \\ \hline
{\$}4011 & DMC\_LEN \\ \hline
{\$}4012 & SND\_CHN \\ \hline
\end{tabular}
\end{table}
Nazwy te zosta³y zaczerpniête z biblioteki audio do NES / Famicom - FamiTone2 \cite{famitone2}. U¿ywam ich równie¿ w kodzie Ÿród³owym programu oraz w tym dokumencie.
(TODO: omówienie ka¿dego rejestru, jeszcze nie kodowa³em tego to nie znam szczegó³ów programowych)

\section{Projekt}
\label{project}
W tej sekcji omówiê krok po kroku jak powstawa³ mój w³asny projekt programu na platformê NES. Zacznê od pojedynczych, prostych czynnoœci a¿ po pewnego rodzaju pe³noprawny szkielet takiego projektu zgodny z dobrymi praktykami programowania NES. Nastêpnie zostan¹ omówione krytyczne fragmenty kodu z punktu widzenia ca³ego projektu oraz w³asne rozwi¹zania czêsto spotykanych zagadnieñ.

\setcounter{subsection}{-1}
\subsection{Absolutne minimum}
Kod w pe³ni inicjuj¹cy konsolê jest doœæ rozbudowany, zatem warto zacz¹æ od czegoœ ³atwiejszego... Niech bêdzie to coœ, co poka¿e ¿e jakkolwiek panujemy nad maszyn¹ - zmiana wartoœci pojedynczej komórki pamiêci to rozs¹dny pomys³. Kod ustalaj¹cy wartoœæ pierwszej komórki RAM na wartoœæ 16 (w systemie szestnastkowym) bêdzie wygl¹da³ nastêpuj¹co:
\begin{verbatim}
lda #$16
sta $0000
\end{verbatim}
Mnemonik \textit{lda} ma wiele odmian - ta zastosowana powy¿ej wczytuje konkretn¹ wartoœæ do wbudowanego w CPU rejestru - akumulatora. Symbol \textit{#$} oznacza w³aœnie konkretn¹ wartoœæ liczbow¹ zapisan¹ szesnastkowo.
Mnemonik \textit{sta} kopiuje wartoœæ z akumulatora pod lokacjê podan¹ jako operand; tutaj jest to pierwsza komórka pamiêci RAM (= o adresie $0000). 

Jednak¿e jest to o wiele za ma³o ¿eby nawet emulator zrobi³ to, co oczekujemy.
Pierwsza sprawa jest zwi¹zana z ogólnie przyjêtym formatem pliku reprezentuj¹cym ROM programu na platformê NES. Taki plik ma szesnastobajtowy nag³ówek opisuj¹cy szczegó³y programu. Nag³ówek jest potrzebny emulatorom oraz flashcartom do przygotowania adekwatnego œrodowiska uruchomieniowego.
W naszym przypadku nag³ówek bêdzie wygl¹da³ nastêpuj¹co:
\begin{verbatim}
.byte "NES"
.byte $1A
.byte 2
.byte 0
.byte %00000000
.byte %00000000
.byte 0, 0
.byte 0, 0, 0, 0, 0, 0
\end{verbatim}
Pierwsze trzy bajty ("NES") to magiczna wartoœæ.
Kolejny bajt to znak koñca linii.
Po wy¿ej opisanych czterech bajtach programy mog¹ rozpoznaæ i¿ maj¹ do czynienia z plikiem w formacie *.NES.
Bajt pi¹ty to iloœæ 16KB stron pamiêci przeznaczonych na kod wykonywalny. Dwa banki wype³niaj¹ ca³¹ przestrzeñ adresow¹ konsoli.
Kolejny bajt to iloœæ 16KB stron pamiêci przeznaczonych na grafikê. W tym momencie nie potrzebujemy ¿adnej grafiki zatem ustawiamy bajt na zero. W³aœciwie wartoœæ zero ma inny efekt a my skorzystamy z efektu ubocznego tego ale jest to na razie nieistotne - uzyskamy po¿¹dany efekt.
Bajty 7 - 10 to flagi - na tê chwilê interesuj¹ nas tylko i wy³¹cznie bajty odpowiadaj¹ce za \cite{mapper}Mapper. Mapper 0 jest "podstawowy" przez co odpowiedni do prostych programów, zatem go ustawimy. Warto wspomnieæ o tym, jak formowany jest numer mappera: cztery górny bajty pochodz¹ z czterech górnych bajtów bajta ósmego w nag³ówku, cztery dolne bajty pochodz¹ z czterech górnych bajtów bajta siódmego w nag³ówku. (TODO: obrazek lepszy)
Funkcjonalnoœæ bajtów 9 oraz 10 nie interesuje nas w tej chwili, mo¿na je ustawiæ na 0 i zapomnieæ o ich istnieniu
Bajty 11 - 15 to dope³nienie nag³ówka. Wartoœci mog¹ byæ dowolne, zwyjczajowo s¹ to zera.

Druga sprawa ma zwi¹zek z architektur¹ konsoli. Zawsze po uruchomieniu / zresetowaniu konsoli, pierwsz¹ rzecz¹ jak¹ robi procesor to skok bezwzglêdny do adresu uformowanego z bajtów pod adresami $FFFC (górny bajt) i $FFFD (dolny bajt). W tym celu modyfikujemy kod w nastêpuj¹cy sposób:
\begin{verbatim}
_INT_Reset:
	lda #$16
	sta $0000

.word _INT_Reset
\end{verbatim}
\textit{.word} to dyrektywa asemblera dzia³aj¹ca jak \textit(.byte), tyle ¿e podajemy wartoœci dwubajtowe zamiast jednobajtowych.
\textit{_INT_Reset} to etykieta, zostanie ona zamieniona na konkretny adres przez linker. Dwukropek definiuje etykietê; sam¹ nazwê etykiety traktuje siê jak konkretn¹ wartoœæ szesnastobitow¹. Nadal zostaje problem powiedzenia kompilatorowi oraz linkerowi ¿e ma wstawiæ adres wyznaczony przez etykietê \textit{_INT_Reset} dok³adnie pod adres $FFFC w ROM. Inna sprawa to wskazanie kompilatorowi / linkerowi i¿ nag³ówek nie jest czêœci¹ kodu lecz ma siê znaleŸæ na pocz¹tku pliku reprezentuj¹cego ROM. Oba problemy rozwi¹¿e dyrektywa asemblera \textit{.segment}. Ukoñczony pierwszy program bêdzie wygl¹da³ nastêpuj¹co:
\begin{verbatim}
.segment "HEADER"
.byte "NES"		; Wartoœæ magiczna
.byte $1A		; Wartoœæ koñca linii
.byte 2			; 2 banki * 16 KB (32 KB) - kod Ÿród³owy (PRG)
.byte 0 		; 0 banków * 8 KB (0 KB) - grafika (CHR)
.byte %00000000 ; mapper 0 (NROM) [bity 0-3] (cztery dolne bity wartoœci)
.byte %00000000 ; mapper 0 (NROM) [bity 0-3] (cztery górne bity wartoœci)
.byte 0, 0
.byte 0, 0, 0, 0, 0, 0

.segment "CODE"
_INT_Reset:
	lda #$16
	sta $0000

.segment "VECTORS"
.word _INT_Reset
\end{verbatim}
\textit{.segment} to dyrektywa mówi¹ca "poni¿sza treœæ nale¿y do bloku danych zdefiniowanego w pliku konfiguracyjnym linkera podanego jako argument dyrektywy". Na tê chwilê brzmi to niezrozumiale, bo jeszcze nawet nie wspomina³em czym jest plik konfiguracyjny linkera. Jest to plik ze wskazówkami jak ma byæ przeprowadzony proces linkowania plików obiektowych. Do pakietu CC65 jest do³¹czony przyk³adowy plik dla platformy NES jednak¿e wymaga wielu zmian by byc w zgodzie z dobrymi praktykami przyjêtymi przez spo³ecznoœæ wspó³czeœnie programuj¹c¹ na tê konsolê, zatem nic nam po nim i trzeba samemu rozgryŸæ jak stworzyæ w³asny. W naszym przypadku plik bêdzie mia³ nastêpuj¹c¹ treœæ:
\begin{verbatim}
MEMORY {
    RAM:    	start = $0000,  size = $0800, type = rw, file = "";
    HDR:    	start = $0000,  size = $0010, type = ro, file = %O, fill = yes, fillval = $00;
    PRG:    	start = $8000,  size = $8000, type = ro, file = %O, fill = yes, fillval = $00;
}

SEGMENTS {
    BSS:      load = RAM, type = bss;
    HEADER:   load = HDR, type = ro;
    CODE:     load = PRG, type = ro,  start = $9000;
    VECTORS:  load = PRG, type = ro,  start = $FFFC;
}
\end{verbatim}
/textit{MEMORY} oraz /textit{SEGMENTS} wyznaczaj¹ grupy zasad steruj¹cych linkerem. Etykiety w sekcji /textit{SEGMENTS} opisuj¹ dwie rzeczy - mapê pamiêci w programie NES za pomoc¹ atrybutu \textt{start} oraz determinuje kolejnoœæ danych w pliku wynikowym dla etykiet z atrybutem /textit{type} o wartoœci \textit{ro}. Kolejnoœæ etykiet mówi jak zostan¹ ustawione dane w pliku wynikowym wyznaczone przez atrybut \textit{load}. Wartoœci tam podane odpowiadaj¹ etykietom zdefiniowanych w sekcji \textit{MEMORY}. Ka¿da wpis definiuje wielkoœæ obszaru, typ dostêpu (odczyt / zapis), w jakim pliku wynikowym siê znajdzie obszar, opcjonalne wype³nienie wartoœciami.
Podsumowuj¹c: \textit{SEGMENTS} ustala "gdzie", \textit{MEMORY} ustala "jak". 


\section{Informacje o platformie}
\label{info}

\subsection{Mapper}
\label{mapper}

\subsection{Pattern Table}
\label{patterntable}

\subsection{Nametable}
\label{nametable}

\subsection{Paleta barw}
\label{palette}

\section{Narzêdzia}
\subsection{CA65}
Strona projektu: https://cc65.github.io/
CA65 jest czêœci¹ wiêkszego pakietu zwanego CC65. Jest on zbiorem narzêdzi do kompilacji kodu napisanego w jêzyku C na sprzêty z procesorem MOS 6502. Za to CA65 jest asemblerem pod ten sam procesor.
W przypadku NES jêzyk C stanowi problem wydajnoœciowy, gdy¿ plik wynikowy który powstaje po kompilacji kodu w C jest znacznie wolniejszy ni¿ odpowiednik asemblerowy; warto pamiêtaæ i¿ ta konsola jest wielokrotnie mniej wydajna ni¿ wspó³czesne sprzêty. St¹d moja decyzja o pisaniu kodu tylko i wy³¹cznie w asemblerze.

(UWAGI: zestaw kompilator plus linker zas³uguje na wiêksze wyró¿nienie od ni¿ej opisanych programów pomocniczych do grafiki czy muzyki; do przemyœlenia miejsce w dokumencie)

\subsection{NES Screen Tool}
\begin{figure}[H]
\includegraphics[width=\textwidth]{nesst.png}
\caption{Ekran g³ówny aplikacji \cite{IMG-nesscreentooloverview}}
\label{fig:figure3}
\end{figure}
NES Screen Tool to program wspomagaj¹cy tworzenie grafiki zgodnej z platform¹ NES / Famicom. Aplikacja pozwala na szczegó³owe tworzenie grafik per pixel jak i bardziej ogólne dzia³ania jak eksport przygotowanych danych do formatu zrozumia³ego przez konsolê, gotowego do zastosowania w kodzie programu.
Strona domowa \cite{nesscreentoolpage}.

\subsection{FamiTracker}
\begin{figure}[H]
\includegraphics[width=\textwidth]{famitracker.png}
\caption{Ekran g³ówny aplikacji \cite{IMG-famitrackeroverview}}
\label{fig:figure3}
\end{figure}
FamiTracker to program pozwalaj¹cy na tworzenie muzyki w stu procentach kompatybilnej z platformami NES / Famicom. Aplikacja nale¿y do rodziny trackerów - programów komputerowych w których komponuje siê muzykê wykorzystuj¹c po³¹czenie zapisu nutowego oraz poleceñ steruj¹cych efektami \cite{wikitracker}.
Strona domowa \cite{famitrackerpage}.

\begin{thebibliography}{99}
\bibitem{IMG-NintendoFamicomConsoleSetFL}
https://upload.wikimedia.org/wikipedia/commons/0/06/Nintendo-Famicom-Console-Set-FL.jpg
\bibitem{IMG-NESConsoleSet} https://upload.wikimedia.org/wikipedia/commons/8/82/NES-Console-Set.jpg
\bibitem{IMG-NewFamicom}
https://upload.wikimedia.org/wikipedia/commons/f/f1/New\_Famicom.jpg
\bibitem{IMG-NES101ConsoleSet}
https://upload.wikimedia.org/wikipedia/commons/e/e0/NES-101-Console-Set.jpg
\bibitem{IMG-GenerationNEX}
https://levelupvideogames.com/used-messiah-generation-nex-468309594161/
\bibitem{IMG-DaryarDY400656}
http://forum.pegasus-gry.com/index.php?topic=2315.0
\bibitem{IMG-GLK-2004}
https://arhn.eu/2018/04/historia-pegasusa-z-klawiatura-glk-2004-et-al/
\bibitem{IMG-Game-Axe-Color}
https://www.ign.com/articles/2000/06/10/game-axe-color
\bibitem{IMG-RetroUSBAVS}
https://upload.wikimedia.org/wikipedia/commons/7/7a/RetroUSB-AVS-Console-wController-FL.jpg
\bibitem{IMG-RetroN5}
https://cdn10.bigcommerce.com/s-2l8ru96d/products/223/images/1135/ret5bk\_\_54484.1567795736.1280.1280.jpg?c=2
\bibitem{IMG-620Games}
https://www.amazon.com/Controllers-Children-Birthday-Childhood-Memories/dp/B083RBYRYN
\bibitem{IMG-mgiq502} http://www.retrogamingmuseum.com/the-collection/micro-genius-nes-clone
\bibitem{IMG-pegiq502} https://archiwum.allegro.pl/oferta/konsola-pegasus-iq-502-pady-pudelko-plomba-i7530854084.html
\bibitem{IMG-deniq502} https://youla.ru/moskva/hobbi-razvlecheniya/konsoli-igry/dendy-classic-2-novaia-5b6c9ae1cf689a85567f44a6
\bibitem{wikiNES}
https://en.wikipedia.org/wiki/Nintendo\_Entertainment\_System
\bibitem{wikiNESClones}
https://en.wikipedia.org/wiki/Nintendo\_Entertainment\_System\_hardware\_clone
\bibitem{nesdoc} Patrick Diskin: \emph{Nintendo Entertainment System Documentation}, 2.1 2A03 Overview, http://www.nesdev.com/NESDoc.pdf
\bibitem{nesmemorymap} http://wiki.nesdev.com/w/index.php/CPU\_memory\_map
\bibitem{wikicpuppuregisters} http://wiki.nesdev.com/w/index.php/PPU\_registers\#Summary
\bibitem{wikicpuapuregisters} http://wiki.nesdev.com/w/index.php/APU\#Specification
\bibitem{famitone2} http://forums.nesdev.com/viewtopic.php?t=7329
\bibitem{nesscreentoolpage} https://shiru.untergrund.net/software.shtml
\bibitem{IMG-nesscreentooloverview} https://shiru.untergrund.net/pic/nesst.png
\bibitem{famitrackerpage} http://famitracker.com/
\bibitem{IMG-famitrackeroverview} https://blog.uptodown.com/wp-content/uploads/Famitracker-pianola.jpg.webp
\bibitem{wikitracker} https://pl.wikipedia.org/wiki/Tracker\_(oprogramowanie\_muzyczne)
\end{thebibliography}

\end{document}
